{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/types.ts"],"sourcesContent":["export type Color = {\r\n  r: number,\r\n  g: number,\r\n  b: number,\r\n}\r\n\r\nexport type Camera = {\r\n  x: number,\r\n  y: number,\r\n  zoom: number,\r\n}\r\n\r\nexport enum LayerType {\r\n  Rectangle,\r\n  Ellipse,\r\n  Path,\r\n  Text,\r\n}\r\n\r\nexport type RectangleLayer = {\r\n  type: LayerType.Rectangle,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n  cornerRadius?: number,\r\n}\r\n\r\nexport type EllipseLayer = {\r\n  type: LayerType.Ellipse,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n}\r\n\r\nexport type PathLayer = {\r\n  type: LayerType.Path,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n  points: number[][],\r\n}\r\n\r\nexport type TextLayer = {\r\n  type: LayerType.Text,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  text: string,\r\n  fontSize: number,\r\n  fontWeight: number,\r\n  fontFamily: string,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n}\r\n\r\nexport type Layer = RectangleLayer | EllipseLayer | PathLayer | TextLayer;\r\n\r\nexport type Point = {\r\n  x: number,\r\n  y: number,\r\n}\r\n\r\nexport type CanvasState = {\r\n  mode: CanvasMode.None\r\n} | {\r\n  mode: CanvasMode.Dragging\r\n  origin: Point | null\r\n} | {\r\n  mode: CanvasMode.Inserting\r\n  layerType: LayerType.Rectangle | LayerType.Ellipse | LayerType.Text\r\n} | {\r\n  mode: CanvasMode.Pencil\r\n}\r\n\r\nexport enum CanvasMode {\r\n  None,\r\n  Dragging,\r\n  Inserting,\r\n  Pencil\r\n}"],"names":[],"mappings":";;;;AAYO,IAAA,AAAK,mCAAA;;;;;WAAA;;AA4EL,IAAA,AAAK,oCAAA;;;;;WAAA","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/utils.ts"],"sourcesContent":["import { Camera, Color, LayerType, PathLayer, Point } from \"./types\";\r\n\r\nexport function colorToCss(color: Color) {\r\n  return `#${color.r.toString(16).padStart(2, \"0\")}${color.g.toString(16).padStart(2, \"0\")}${color.b.toString(16).padStart(2, \"0\")}`;\r\n}\r\n\r\nexport function penPointsToPathLayer (\r\n  points: number[][],\r\n  color: Color\r\n) : PathLayer {\r\n  let left = Number.POSITIVE_INFINITY;\r\n  let top = Number.POSITIVE_INFINITY;\r\n  let right = Number.NEGATIVE_INFINITY;\r\n  let bottom = Number.NEGATIVE_INFINITY;\r\n\r\n  for (const point of points) {\r\n    const [x, y] = point;\r\n    if (x === undefined || y === undefined) continue;\r\n\r\n    if (left > x) {\r\n      left = x;\r\n    }\r\n    if (top > y) {\r\n      top = y;\r\n    }\r\n    if (right < x) {\r\n      right = x;\r\n    }\r\n    if (bottom < y) {\r\n      bottom = y;\r\n    }\r\n  }\r\n\r\n  return {\r\n    type: LayerType.Path,\r\n    x: left,\r\n    y: top,\r\n    height: bottom - top,\r\n    width: right - left,\r\n    fill: color,\r\n    stroke: color,\r\n    opacity: 100,\r\n    points: points\r\n      .filter(\r\n      (point): point is [number, number, number] => \r\n        point[0] !== undefined && \r\n        point[1] !== undefined && \r\n        point[2] !== undefined\r\n      )\r\n    .map(([x, y, pressure]) => [x - left, y - top, pressure]),\r\n  }\r\n}\r\n\r\nexport const pointerEventToCanvasPoint = (\r\n  e: React.PointerEvent, \r\n  camera: Camera\r\n): Point => {\r\n  return {\r\n    x: Math.round(e.clientX) - camera.x,\r\n    y: Math.round(e.clientY) - camera.y\r\n  }\r\n};\r\n\r\nexport function getSvgPathFromStroke(stroke: number[][]) {\r\n  if (!stroke.length) return \"\"\r\n\r\n  const d = stroke.reduce(\r\n    (acc, [x0, y0], i, arr) => {\r\n      const nextPoint = arr[(i + 1) % arr.length]\r\n\r\n      if(!nextPoint) return acc;\r\n\r\n      const [x1, y1] = nextPoint\r\n      acc.push(x0!, y0!, (x0! + x1!) / 2, (y0! + y1!) / 2)\r\n      return acc\r\n    },\r\n    [\"M\", ...stroke[0] ?? [], \"Q\"]\r\n  )\r\n\r\n  d.push(\"Z\")\r\n  return d.join(\" \")\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEO,SAAS,WAAW,KAAY;IACrC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,OAAO,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,OAAO,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM;AACpI;AAEO,SAAS,qBACd,MAAkB,EAClB,KAAY;IAEZ,IAAI,OAAO,OAAO,iBAAiB;IACnC,IAAI,MAAM,OAAO,iBAAiB;IAClC,IAAI,QAAQ,OAAO,iBAAiB;IACpC,IAAI,SAAS,OAAO,iBAAiB;IAErC,KAAK,MAAM,SAAS,OAAQ;QAC1B,MAAM,CAAC,GAAG,EAAE,GAAG;QACf,IAAI,MAAM,aAAa,MAAM,WAAW;QAExC,IAAI,OAAO,GAAG;YACZ,OAAO;QACT;QACA,IAAI,MAAM,GAAG;YACX,MAAM;QACR;QACA,IAAI,QAAQ,GAAG;YACb,QAAQ;QACV;QACA,IAAI,SAAS,GAAG;YACd,SAAS;QACX;IACF;IAEA,OAAO;QACL,MAAM,+GAAA,CAAA,YAAS,CAAC,IAAI;QACpB,GAAG;QACH,GAAG;QACH,QAAQ,SAAS;QACjB,OAAO,QAAQ;QACf,MAAM;QACN,QAAQ;QACR,SAAS;QACT,QAAQ,OACL,MAAM,CACP,CAAC,QACC,KAAK,CAAC,EAAE,KAAK,aACb,KAAK,CAAC,EAAE,KAAK,aACb,KAAK,CAAC,EAAE,KAAK,WAEhB,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,SAAS,GAAK;gBAAC,IAAI;gBAAM,IAAI;gBAAK;aAAS;IAC1D;AACF;AAEO,MAAM,4BAA4B,CACvC,GACA;IAEA,OAAO;QACL,GAAG,KAAK,KAAK,CAAC,EAAE,OAAO,IAAI,OAAO,CAAC;QACnC,GAAG,KAAK,KAAK,CAAC,EAAE,OAAO,IAAI,OAAO,CAAC;IACrC;AACF;AAEO,SAAS,qBAAqB,MAAkB;IACrD,IAAI,CAAC,OAAO,MAAM,EAAE,OAAO;IAE3B,MAAM,IAAI,OAAO,MAAM,CACrB,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,GAAG;QACjB,MAAM,YAAY,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC;QAE3C,IAAG,CAAC,WAAW,OAAO;QAEtB,MAAM,CAAC,IAAI,GAAG,GAAG;QACjB,IAAI,IAAI,CAAC,IAAK,IAAK,CAAC,KAAM,EAAG,IAAI,GAAG,CAAC,KAAM,EAAG,IAAI;QAClD,OAAO;IACT,GACA;QAAC;WAAQ,MAAM,CAAC,EAAE,IAAI,EAAE;QAAE;KAAI;IAGhC,EAAE,IAAI,CAAC;IACP,OAAO,EAAE,IAAI,CAAC;AAChB","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Rectangle.tsx"],"sourcesContent":["import { RectangleLayer } from \"~/types\";\r\nimport { colorToCss } from \"~/utils\";\r\n\r\nexport default function Rectangle({\r\n  id,\r\n  layer,\r\n} : {id : string , layer : RectangleLayer}) {\r\n  const {x,y,width,height,fill,stroke,opacity,cornerRadius} = layer\r\n  return (\r\n    <g>\r\n      <rect \r\n        style={{transform: `translate(${x}px, ${y}px)`}}  \r\n        width={width} \r\n        height={height} \r\n        fill={fill ? colorToCss(fill) : \"#CCC\"}\r\n        strokeWidth={1}\r\n        stroke={stroke ? colorToCss(stroke) : \"#CCC\"}\r\n        opacity={`${opacity ?? 100}%`}\r\n        rx={cornerRadius ?? 0}\r\n        ry={cornerRadius ?? 0}\r\n      />\r\n    </g>\r\n  )\r\n}"],"names":[],"mappings":";;;;AACA;;;AAEe,SAAS,UAAU,EAChC,EAAE,EACF,KAAK,EACmC;IACxC,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,KAAK,EAAC,MAAM,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAC,YAAY,EAAC,GAAG;IAC5D,qBACE,6LAAC;kBACC,cAAA,6LAAC;YACC,OAAO;gBAAC,WAAW,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;YAAA;YAC9C,OAAO;YACP,QAAQ;YACR,MAAM,OAAO,CAAA,GAAA,+GAAA,CAAA,aAAU,AAAD,EAAE,QAAQ;YAChC,aAAa;YACb,QAAQ,SAAS,CAAA,GAAA,+GAAA,CAAA,aAAU,AAAD,EAAE,UAAU;YACtC,SAAS,GAAG,WAAW,IAAI,CAAC,CAAC;YAC7B,IAAI,gBAAgB;YACpB,IAAI,gBAAgB;;;;;;;;;;;AAI5B;KApBwB","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Ellipse.tsx"],"sourcesContent":["import { EllipseLayer } from \"~/types\";\r\nimport { colorToCss } from \"~/utils\";\r\n\r\nexport default function Ellipse({\r\n  id,\r\n  layer,\r\n} : {id : string , layer : EllipseLayer}) {\r\n  const {x,y,width,height,fill,stroke,opacity} = layer\r\n  return (\r\n    <g>\r\n      <ellipse \r\n        style={{transform: `translate(${x}px, ${y}px)`}}\r\n        fill={fill ? colorToCss(fill) : \"#CCC\"} \r\n        stroke={stroke ? colorToCss(stroke) : \"#CCC\"}\r\n        cx={width/2}\r\n        cy={height/2}\r\n        rx={width/2}\r\n        ry={height/2}\r\n        strokeWidth=\"1\"\r\n        opacity={`${opacity ?? 100}%`}\r\n      />\r\n    </g>\r\n  )\r\n}"],"names":[],"mappings":";;;;AACA;;;AAEe,SAAS,QAAQ,EAC9B,EAAE,EACF,KAAK,EACiC;IACtC,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,KAAK,EAAC,MAAM,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAC,GAAG;IAC/C,qBACE,6LAAC;kBACC,cAAA,6LAAC;YACC,OAAO;gBAAC,WAAW,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;YAAA;YAC9C,MAAM,OAAO,CAAA,GAAA,+GAAA,CAAA,aAAU,AAAD,EAAE,QAAQ;YAChC,QAAQ,SAAS,CAAA,GAAA,+GAAA,CAAA,aAAU,AAAD,EAAE,UAAU;YACtC,IAAI,QAAM;YACV,IAAI,SAAO;YACX,IAAI,QAAM;YACV,IAAI,SAAO;YACX,aAAY;YACZ,SAAS,GAAG,WAAW,IAAI,CAAC,CAAC;;;;;;;;;;;AAIrC;KApBwB","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Path.tsx"],"sourcesContent":["import { Color } from \"~/types\";\r\nimport {getStroke} from 'perfect-freehand'\r\nimport { colorToCss, getSvgPathFromStroke } from \"~/utils\";\r\n\r\nexport default function Path({\r\n  x, \r\n  y, \r\n  stroke, \r\n  fill, \r\n  opacity, \r\n  points \r\n} : \r\n{\r\n  x: number,\r\n  y: number, \r\n  stroke?: string, \r\n  fill: string, \r\n  opacity: number, \r\n  points: number[][];\r\n}) {\r\n\r\n  const pathData = getSvgPathFromStroke(getStroke(points, {\r\n    size: 16,\r\n    thinning: 0.5,\r\n    smoothing: 0.5,\r\n    streamline: 0.5,\r\n  }))\r\n  \r\n  return (\r\n    <path\r\n      style={{transform: `translate(${x}px, ${y}px)`}}\r\n      d={pathData} \r\n      fill={fill} \r\n      stroke={stroke ?? \"#CCC\"}\r\n      strokeWidth={1}\r\n      opacity={`${opacity ?? 100}%`}\r\n    />\r\n  )\r\n}"],"names":[],"mappings":";;;;AACA;AACA;;;;AAEe,SAAS,KAAK,EAC3B,CAAC,EACD,CAAC,EACD,MAAM,EACN,IAAI,EACJ,OAAO,EACP,MAAM,EASP;IAEC,MAAM,WAAW,CAAA,GAAA,+GAAA,CAAA,uBAAoB,AAAD,EAAE,CAAA,GAAA,+JAAA,CAAA,YAAS,AAAD,EAAE,QAAQ;QACtD,MAAM;QACN,UAAU;QACV,WAAW;QACX,YAAY;IACd;IAEA,qBACE,6LAAC;QACC,OAAO;YAAC,WAAW,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;QAAA;QAC9C,GAAG;QACH,MAAM;QACN,QAAQ,UAAU;QAClB,aAAa;QACb,SAAS,GAAG,WAAW,IAAI,CAAC,CAAC;;;;;;AAGnC;KAlCwB","debugId":null}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/LayerComponent.tsx"],"sourcesContent":["import { useStorage } from \"@liveblocks/react\";\r\nimport { memo } from \"react\";\r\nimport { LayerType } from \"~/types\";\r\nimport Rectangle from \"./Rectangle\";\r\nimport Ellipse from './Ellipse';\r\nimport Path from \"./Path\";\r\nimport { colorToCss } from \"~/utils\";\r\n\r\nconst LayerComponent = memo(({id}: {id: string}) => {\r\n  const layer = useStorage((root) => root.layers.get(id))\r\n  if(!layer) {\r\n    return null;\r\n  }\r\n  switch(layer.type) {\r\n    case LayerType.Rectangle :\r\n      return <Rectangle id={id} layer={layer}/>;\r\n    case LayerType.Ellipse :\r\n      return <Ellipse id={id} layer={layer} />;\r\n    case LayerType.Path :\r\n      return (\r\n        <Path \r\n          points={layer.points} \r\n          x={layer.x} \r\n          y={layer.y} \r\n          fill={layer.fill ? colorToCss(layer.fill) : \"#CCC\"} \r\n          stroke={layer.stroke ? colorToCss(layer.stroke) : \"#CCC\"}\r\n          opacity={layer.opacity}\r\n        />\r\n      ) \r\n    default :\r\n      return null;\r\n  }\r\n})\r\n\r\nLayerComponent.displayName = \"LayerComponent\"\r\n\r\nexport default LayerComponent;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA,MAAM,+BAAiB,GAAA,CAAA,GAAA,6JAAA,CAAA,OAAI,AAAD,UAAE,CAAC,EAAC,EAAE,EAAe;;IAC7C,MAAM,QAAQ,CAAA,GAAA,qNAAA,CAAA,aAAU,AAAD;4CAAE,CAAC,OAAS,KAAK,MAAM,CAAC,GAAG,CAAC;;IACnD,IAAG,CAAC,OAAO;QACT,OAAO;IACT;IACA,OAAO,MAAM,IAAI;QACf,KAAK,+GAAA,CAAA,YAAS,CAAC,SAAS;YACtB,qBAAO,6LAAC,4IAAA,CAAA,UAAS;gBAAC,IAAI;gBAAI,OAAO;;;;;;QACnC,KAAK,+GAAA,CAAA,YAAS,CAAC,OAAO;YACpB,qBAAO,6LAAC,0IAAA,CAAA,UAAO;gBAAC,IAAI;gBAAI,OAAO;;;;;;QACjC,KAAK,+GAAA,CAAA,YAAS,CAAC,IAAI;YACjB,qBACE,6LAAC,uIAAA,CAAA,UAAI;gBACH,QAAQ,MAAM,MAAM;gBACpB,GAAG,MAAM,CAAC;gBACV,GAAG,MAAM,CAAC;gBACV,MAAM,MAAM,IAAI,GAAG,CAAA,GAAA,+GAAA,CAAA,aAAU,AAAD,EAAE,MAAM,IAAI,IAAI;gBAC5C,QAAQ,MAAM,MAAM,GAAG,CAAA,GAAA,+GAAA,CAAA,aAAU,AAAD,EAAE,MAAM,MAAM,IAAI;gBAClD,SAAS,MAAM,OAAO;;;;;;QAG5B;YACE,OAAO;IACX;AACF;;QAvBgB,qNAAA,CAAA,aAAU;;;;QAAV,qNAAA,CAAA,aAAU;;;;AAyB1B,eAAe,WAAW,GAAG;uCAEd","debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/IconButton.tsx"],"sourcesContent":["export default function IconButton({\r\n  onClick,\r\n  children,\r\n  isActive,\r\n  disabled\r\n}: {\r\n  onClick: () => void,\r\n  children: React.ReactNode,\r\n  isActive?: boolean,\r\n  disabled?: boolean\r\n}) {\r\n  return (\r\n    <button \r\n    className={`flex items-center justify-center min-h-[28px] min-w-[28px] rounded-md text-gray-500 hover:enabled:text-gray-700 focus:enabled:text-gray-700 active:enabled:text-gray-900 disabled:cursor-default disabled:opacity-50 ${isActive ? \"bg-gray-100 text-blue-600 hover:enabled:text-blue-600 focus:enabled:text-blue-600 active:enabled:text-blue-600\" : \"\"}`}\r\n    onClick={onClick} \r\n    disabled={disabled}\r\n    >\r\n      {children}\r\n    </button>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAAe,SAAS,WAAW,EACjC,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,QAAQ,EAMT;IACC,qBACE,6LAAC;QACD,WAAW,CAAC,qNAAqN,EAAE,WAAW,mHAAmH,IAAI;QACrW,SAAS;QACT,UAAU;kBAEP;;;;;;AAGP;KApBwB","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/MenuIcon.tsx"],"sourcesContent":["export default function MenuIcon() {\r\n  return (\r\n    <svg \r\n      className=\"w-4 h-4\"\r\n      viewBox=\"0 0 24 24\" \r\n      fill=\"none\" \r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path \r\n        d=\"M18 15L12 9L6 15\" \r\n        stroke=\"currentColor\" \r\n        strokeWidth=\"1.5\"\r\n        strokeLinecap=\"round\"\r\n      />\r\n    </svg>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAAe,SAAS;IACtB,qBACE,6LAAC;QACC,WAAU;QACV,SAAQ;QACR,MAAK;QACL,OAAM;kBAEN,cAAA,6LAAC;YACC,GAAE;YACF,QAAO;YACP,aAAY;YACZ,eAAc;;;;;;;;;;;AAItB;KAhBwB","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/SelectionButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { CanvasMode } from \"~/types\";\r\nimport IconButton from \"./IconButton\";\r\nimport { BiPointer } from 'react-icons/bi'\r\nimport { RiHand } from 'react-icons/ri'\r\nimport MenuIcon from \"./MenuIcon\";\r\n\r\nexport default function SelectionButton({\r\n  isActive,\r\n  canvasMode,\r\n  onClick\r\n}: { \r\n  isActive: boolean,\r\n  canvasMode: CanvasMode, \r\n  onClick: (canvasMode: CanvasMode.None | CanvasMode.Dragging) => void\r\n}) {\r\n  const [open, setOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  const handleClick = (canvasMode: CanvasMode.None | CanvasMode.Dragging) => {\r\n    onClick(canvasMode)\r\n    setOpen(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setOpen(false)\r\n      }\r\n    }\r\n      document.addEventListener('mousedown',handleClickOutside)\r\n      \r\n      return() => document.removeEventListener('mousedown',handleClickOutside)\r\n  },[])\r\n\r\n  return (\r\n    <div className=\"relative flex\" ref={menuRef}>\r\n      <IconButton isActive={isActive} onClick={() => onClick(CanvasMode.None)}>\r\n        {canvasMode !== CanvasMode.None  && canvasMode !== CanvasMode.Dragging && (<BiPointer className=\"h-5 w-5\"/>)}\r\n        {canvasMode === CanvasMode.None  && <BiPointer className=\"h-5 w-5\"/>}\r\n        {canvasMode === CanvasMode.Dragging  && <RiHand className=\"h-5 w-5\"/>}\r\n      </IconButton>\r\n      <button \r\n        onClick={() => setOpen(!open)}\r\n        className=\"ml-1\"\r\n      >\r\n        <MenuIcon />\r\n      </button>\r\n      {open && (\r\n        <div className=\"absolute -top-20 mt-1 min-w-[150px] rounded-xl bg-[#1e1e1e] p-2 shadow-lg\">\r\n          <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasMode === CanvasMode.None ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(CanvasMode.None)}>\r\n            <span className=\"w-5 text-xs\">\r\n              {canvasMode === CanvasMode.None && \"✓\"}\r\n            </span>\r\n            <BiPointer className=\"mr-2 h-4 w-4\"/>\r\n            <span className=\"text-xs\">Move</span>\r\n          </button>\r\n\r\n          <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasMode === CanvasMode.Dragging ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(CanvasMode.Dragging)}>\r\n            <span className=\"w-5 text-xs\">\r\n              {canvasMode === CanvasMode.Dragging && \"✓\"}\r\n            </span>\r\n            <RiHand className=\"mr-2 h-4 w-4\"/>\r\n            <span className=\"text-xs\">Hand Tool</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS,gBAAgB,EACtC,QAAQ,EACR,UAAU,EACV,OAAO,EAKR;;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAEvC,MAAM,cAAc,CAAC;QACnB,QAAQ;QACR,QAAQ;IACV;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,MAAM;gEAAqB,CAAC;oBAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;wBACtE,QAAQ;oBACV;gBACF;;YACE,SAAS,gBAAgB,CAAC,aAAY;YAEtC;6CAAM,IAAM,SAAS,mBAAmB,CAAC,aAAY;;QACzD;oCAAE,EAAE;IAEJ,qBACE,6LAAC;QAAI,WAAU;QAAgB,KAAK;;0BAClC,6LAAC,+IAAA,CAAA,UAAU;gBAAC,UAAU;gBAAU,SAAS,IAAM,QAAQ,+GAAA,CAAA,aAAU,CAAC,IAAI;;oBACnE,eAAe,+GAAA,CAAA,aAAU,CAAC,IAAI,IAAK,eAAe,+GAAA,CAAA,aAAU,CAAC,QAAQ,kBAAK,6LAAC,iJAAA,CAAA,YAAS;wBAAC,WAAU;;;;;;oBAC/F,eAAe,+GAAA,CAAA,aAAU,CAAC,IAAI,kBAAK,6LAAC,iJAAA,CAAA,YAAS;wBAAC,WAAU;;;;;;oBACxD,eAAe,+GAAA,CAAA,aAAU,CAAC,QAAQ,kBAAK,6LAAC,iJAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;;;;;;;0BAE5D,6LAAC;gBACC,SAAS,IAAM,QAAQ,CAAC;gBACxB,WAAU;0BAEV,cAAA,6LAAC,6IAAA,CAAA,UAAQ;;;;;;;;;;YAEV,sBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,eAAe,+GAAA,CAAA,aAAU,CAAC,IAAI,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,+GAAA,CAAA,aAAU,CAAC,IAAI;;0CAC1L,6LAAC;gCAAK,WAAU;0CACb,eAAe,+GAAA,CAAA,aAAU,CAAC,IAAI,IAAI;;;;;;0CAErC,6LAAC,iJAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;0CACrB,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;kCAG5B,6LAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,eAAe,+GAAA,CAAA,aAAU,CAAC,QAAQ,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,+GAAA,CAAA,aAAU,CAAC,QAAQ;;0CAClM,6LAAC;gCAAK,WAAU;0CACb,eAAe,+GAAA,CAAA,aAAU,CAAC,QAAQ,IAAI;;;;;;0CAEzC,6LAAC,iJAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;0CAClB,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;GA9DwB;KAAA","debugId":null}},
    {"offset": {"line": 586, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/ShapesSelectionButton.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { CanvasMode, CanvasState, LayerType } from \"~/types\";\r\nimport IconButton from \"./IconButton\";\r\nimport {IoEllipseOutline, IoSquareOutline} from \"react-icons/io5\"\r\nimport MenuIcon from \"./MenuIcon\";\r\n\r\nexport default function ShapesSelectionButton({\r\n  isActive,\r\n  canvasState,\r\n  onClick\r\n}: { \r\n  isActive: boolean,\r\n  canvasState: CanvasState, \r\n  onClick: (layerType: LayerType.Rectangle | LayerType.Ellipse) => void\r\n}) {\r\n  const [open, setOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  const handleClick = (layerType: LayerType.Rectangle | LayerType.Ellipse) => {\r\n    onClick(layerType)\r\n    setOpen(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setOpen(false)\r\n      }\r\n    }\r\n      document.addEventListener('mousedown',handleClickOutside)\r\n      \r\n      return() => document.removeEventListener('mousedown',handleClickOutside)\r\n  },[])\r\n\r\n  return (\r\n    <div className=\"relative flex\" ref={menuRef}>\r\n    <IconButton \r\n      isActive={isActive} \r\n      onClick={() => onClick(LayerType.Rectangle)}\r\n    >\r\n      {canvasState.mode !== CanvasMode.Inserting && <IoSquareOutline className=\"w-5 h-5\"/>}\r\n      {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Rectangle && <IoSquareOutline className=\"w-5 h-5\"/>}\r\n      {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Ellipse && <IoEllipseOutline className=\"w-5 h-5\"/>}\r\n    </IconButton>\r\n    <button \r\n      onClick={() => setOpen(!open)}\r\n      className=\"ml-1\"\r\n    >\r\n      <MenuIcon />\r\n    </button>\r\n    {open && (\r\n      <div className=\"absolute -top-20 mt-1 min-w-[150px] rounded-xl bg-[#1e1e1e] p-2 shadow-lg\">\r\n        <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Rectangle ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(LayerType.Rectangle)}>\r\n          <span className=\"w-5 text-xs\">\r\n            {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Rectangle && \"✓\"}\r\n          </span>\r\n          <IoSquareOutline className=\"mr-2 h-4 w-4\"/>\r\n          <span className=\"text-xs\">Rectangle</span>\r\n        </button>\r\n\r\n        <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Ellipse ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(LayerType.Ellipse)}>\r\n          <span className=\"w-5 text-xs\">\r\n            {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Ellipse && \"✓\"}\r\n          </span>\r\n          <IoEllipseOutline className=\"mr-2 h-4 w-4\"/>\r\n          <span className=\"text-xs\">Ellipse</span>\r\n        </button>\r\n      </div>\r\n    )}\r\n  </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAEe,SAAS,sBAAsB,EAC5C,QAAQ,EACR,WAAW,EACX,OAAO,EAKR;;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAEvC,MAAM,cAAc,CAAC;QACnB,QAAQ;QACR,QAAQ;IACV;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;2CAAE;YACR,MAAM;sEAAqB,CAAC;oBAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;wBACtE,QAAQ;oBACV;gBACF;;YACE,SAAS,gBAAgB,CAAC,aAAY;YAEtC;mDAAM,IAAM,SAAS,mBAAmB,CAAC,aAAY;;QACzD;0CAAE,EAAE;IAEJ,qBACE,6LAAC;QAAI,WAAU;QAAgB,KAAK;;0BACpC,6LAAC,+IAAA,CAAA,UAAU;gBACT,UAAU;gBACV,SAAS,IAAM,QAAQ,+GAAA,CAAA,YAAS,CAAC,SAAS;;oBAEzC,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,kBAAI,6LAAC,kJAAA,CAAA,kBAAe;wBAAC,WAAU;;;;;;oBACxE,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,+GAAA,CAAA,YAAS,CAAC,SAAS,kBAAI,6LAAC,kJAAA,CAAA,kBAAe;wBAAC,WAAU;;;;;;oBACzH,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,+GAAA,CAAA,YAAS,CAAC,OAAO,kBAAI,6LAAC,kJAAA,CAAA,mBAAgB;wBAAC,WAAU;;;;;;;;;;;;0BAE3H,6LAAC;gBACC,SAAS,IAAM,QAAQ,CAAC;gBACxB,WAAU;0BAEV,cAAA,6LAAC,6IAAA,CAAA,UAAQ;;;;;;;;;;YAEV,sBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,+GAAA,CAAA,YAAS,CAAC,SAAS,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,+GAAA,CAAA,YAAS,CAAC,SAAS;;0CAC1P,6LAAC;gCAAK,WAAU;0CACb,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,+GAAA,CAAA,YAAS,CAAC,SAAS,IAAI;;;;;;0CAEjG,6LAAC,kJAAA,CAAA,kBAAe;gCAAC,WAAU;;;;;;0CAC3B,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;kCAG5B,6LAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,+GAAA,CAAA,YAAS,CAAC,OAAO,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,+GAAA,CAAA,YAAS,CAAC,OAAO;;0CACtP,6LAAC;gCAAK,WAAU;0CACb,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,+GAAA,CAAA,YAAS,CAAC,OAAO,IAAI;;;;;;0CAE/F,6LAAC,kJAAA,CAAA,mBAAgB;gCAAC,WAAU;;;;;;0CAC5B,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMpC;GAjEwB;KAAA","debugId":null}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/ZoomInButton.tsx"],"sourcesContent":["import IconButton from \"./IconButton\"\r\nimport {AiOutlineZoomIn} from 'react-icons/ai'\r\n\r\nexport default function ZoomInButton({\r\n  onClick,\r\n  disabled\r\n} : {\r\n  onClick: () => void,\r\n  disabled: boolean\r\n}) {\r\n  return (\r\n    <IconButton onClick={onClick} disabled={disabled}>\r\n      <AiOutlineZoomIn size={22} color=\"#888888\"/>\r\n    </IconButton>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEe,SAAS,aAAa,EACnC,OAAO,EACP,QAAQ,EAIT;IACC,qBACE,6LAAC,+IAAA,CAAA,UAAU;QAAC,SAAS;QAAS,UAAU;kBACtC,cAAA,6LAAC,iJAAA,CAAA,kBAAe;YAAC,MAAM;YAAI,OAAM;;;;;;;;;;;AAGvC;KAZwB","debugId":null}},
    {"offset": {"line": 807, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/ZoomOutButton.tsx"],"sourcesContent":["import IconButton from \"./IconButton\"\r\nimport {AiOutlineZoomOut} from 'react-icons/ai'\r\n\r\nexport default function ZoomOutButton({\r\n  onClick,\r\n  disabled\r\n} : {\r\n  onClick: () => void,\r\n  disabled: boolean\r\n}) {\r\n  return (\r\n    <IconButton onClick={onClick} disabled={disabled}>\r\n      <AiOutlineZoomOut size={22} color=\"#888888\"/>\r\n    </IconButton>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEe,SAAS,cAAc,EACpC,OAAO,EACP,QAAQ,EAIT;IACC,qBACE,6LAAC,+IAAA,CAAA,UAAU;QAAC,SAAS;QAAS,UAAU;kBACtC,cAAA,6LAAC,iJAAA,CAAA,mBAAgB;YAAC,MAAM;YAAI,OAAM;;;;;;;;;;;AAGxC;KAZwB","debugId":null}},
    {"offset": {"line": 846, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/PencilButton.tsx"],"sourcesContent":["import IconButton from \"./IconButton\";\r\n\r\nexport default function PencilButton({ \r\n  isActive, \r\n  onClick\r\n} : {\r\n  isActive: boolean, \r\n  onClick: () => void,\r\n}) {\r\n  return (\r\n    <IconButton \r\n      isActive={isActive} \r\n      onClick={onClick}\r\n    >\r\n      <svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" fill=\"none\">\r\n        <path\r\n          d=\"M22.8538 10.1464C22.76 10.0527 22.6329 10 22.5003 10C22.3677 10 22.2406 10.0527 22.1468 10.1464L20.4998 11.7934L24.2068 15.5004L25.8538 13.8544C25.9004 13.8079 25.9373 13.7528 25.9625 13.692C25.9877 13.6313 26.0007 13.5662 26.0007 13.5004C26.0007 13.4346 25.9877 13.3695 25.9625 13.3088C25.9373 13.248 25.9004 13.1928 25.8538 13.1464L22.8538 10.1464ZM23.4998 16.2074L19.7928 12.5004L13.2928 19.0004H13.4998C13.6324 19.0004 13.7596 19.0531 13.8534 19.1468C13.9471 19.2406 13.9998 19.3678 13.9998 19.5004V20.0004H14.4998C14.6324 20.0004 14.7596 20.0531 14.8534 20.1468C14.9471 20.2406 14.9998 20.3678 14.9998 20.5004V21.0004H15.4998C15.6324 21.0004 15.7596 21.0531 15.8534 21.1468C15.9471 21.2406 15.9998 21.3678 15.9998 21.5004V22.0004H16.4998C16.6324 22.0004 16.7596 22.0531 16.8534 22.1468C16.9471 22.2406 16.9998 22.3678 16.9998 22.5004V22.7074L23.4998 16.2074ZM16.0318 23.6754C16.0108 23.6194 15.9999 23.5602 15.9998 23.5004V23.0004H15.4998C15.3672 23.0004 15.24 22.9477 15.1463 22.8539C15.0525 22.7602 14.9998 22.633 14.9998 22.5004V22.0004H14.4998C14.3672 22.0004 14.24 21.9477 14.1463 21.8539C14.0525 21.7602 13.9998 21.633 13.9998 21.5004V21.0004H13.4998C13.3672 21.0004 13.24 20.9477 13.1463 20.8539C13.0525 20.7602 12.9998 20.633 12.9998 20.5004V20.0004H12.4998C12.44 20.0003 12.3808 19.9895 12.3248 19.9684L12.1458 20.1464C12.0982 20.1944 12.0607 20.2515 12.0358 20.3144L10.0358 25.3144C9.99944 25.4053 9.99053 25.5048 10.0102 25.6007C10.0299 25.6966 10.0772 25.7845 10.1464 25.8538C10.2157 25.923 10.3036 25.9703 10.3995 25.99C10.4954 26.0097 10.5949 26.0008 10.6858 25.9644L15.6858 23.9644C15.7487 23.9395 15.8058 23.902 15.8538 23.8544L16.0318 23.6764V23.6754Z\"\r\n          fill=\"currentColor\"\r\n        />\r\n      </svg>\r\n    </IconButton>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,aAAa,EACnC,QAAQ,EACR,OAAO,EAIR;IACC,qBACE,6LAAC,+IAAA,CAAA,UAAU;QACT,UAAU;QACV,SAAS;kBAET,cAAA,6LAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;sBACnD,cAAA,6LAAC;gBACC,GAAE;gBACF,MAAK;;;;;;;;;;;;;;;;AAKf;KApBwB","debugId":null}},
    {"offset": {"line": 893, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/ToolsBar.tsx"],"sourcesContent":["import { CanvasMode, CanvasState, LayerType } from \"~/types\";\r\nimport SelectionButton from \"./SelectionButton\";\r\nimport ShapesSelectionButton from \"./ShapesSelectionButton\";\r\nimport ZoomInButton from \"./ZoomInButton\";\r\nimport ZoomOutButton from \"./ZoomOutButton\";\r\nimport PencilButton from \"./PencilButton\";\r\n\r\nexport default function ToolsBar({\r\n  canvasState,\r\n  setCanvasState,\r\n  zoomIn,\r\n  zoomOut,\r\n  canZoomIn,\r\n  canZoomOut\r\n} : {\r\n  zoomIn: () => void,\r\n  zoomOut: () => void,\r\n  canZoomIn: boolean,\r\n  canZoomOut: boolean,\r\n  canvasState: CanvasState,\r\n  setCanvasState: (newState: CanvasState) => void\r\n}) {\r\n  return (\r\n    <div className=\"fixed bottom-4 left-1/2 z-10 flex -translate-x-1/2 items-center justify-center rounded-lg bg-white p-1 shadow-[0_0_3px_rgba(0,0,0,0,18)]\">\r\n      <div className=\"flex justify-center items-center gap-3\">\r\n        <SelectionButton \r\n          isActive={canvasState.mode === CanvasMode.None || canvasState.mode === CanvasMode.Dragging}\r\n          canvasMode={canvasState.mode} \r\n          onClick={(canvasMode) => setCanvasState(canvasMode === CanvasMode.Dragging ?\r\n            {mode: canvasMode, origin: null} : {mode: canvasMode}\r\n          )}\r\n        />\r\n        <ShapesSelectionButton \r\n          isActive={canvasState.mode === CanvasMode.Inserting && [LayerType.Rectangle, LayerType.Ellipse].includes(canvasState.layerType)}\r\n          canvasState={canvasState}\r\n          onClick={(layerType) => setCanvasState({mode: CanvasMode.Inserting, layerType})}\r\n        />\r\n\r\n        <PencilButton \r\n          isActive={canvasState.mode === CanvasMode.Pencil}\r\n          onClick={() => setCanvasState({mode: CanvasMode.Pencil})}\r\n        />\r\n\r\n        <div className=\"w-[1px] self-stretch bg-black/10\"/>\r\n        <div className=\"flex items-center justify-center\">\r\n          <ZoomInButton onClick={zoomIn} disabled={!canZoomIn}/>\r\n          <ZoomOutButton onClick={zoomOut} disabled={!canZoomOut}/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEe,SAAS,SAAS,EAC/B,WAAW,EACX,cAAc,EACd,MAAM,EACN,OAAO,EACP,SAAS,EACT,UAAU,EAQX;IACC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,oJAAA,CAAA,UAAe;oBACd,UAAU,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,IAAI,IAAI,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,QAAQ;oBAC1F,YAAY,YAAY,IAAI;oBAC5B,SAAS,CAAC,aAAe,eAAe,eAAe,+GAAA,CAAA,aAAU,CAAC,QAAQ,GACxE;4BAAC,MAAM;4BAAY,QAAQ;wBAAI,IAAI;4BAAC,MAAM;wBAAU;;;;;;8BAGxD,6LAAC,0JAAA,CAAA,UAAqB;oBACpB,UAAU,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,SAAS,IAAI;wBAAC,+GAAA,CAAA,YAAS,CAAC,SAAS;wBAAE,+GAAA,CAAA,YAAS,CAAC,OAAO;qBAAC,CAAC,QAAQ,CAAC,YAAY,SAAS;oBAC9H,aAAa;oBACb,SAAS,CAAC,YAAc,eAAe;4BAAC,MAAM,+GAAA,CAAA,aAAU,CAAC,SAAS;4BAAE;wBAAS;;;;;;8BAG/E,6LAAC,iJAAA,CAAA,UAAY;oBACX,UAAU,YAAY,IAAI,KAAK,+GAAA,CAAA,aAAU,CAAC,MAAM;oBAChD,SAAS,IAAM,eAAe;4BAAC,MAAM,+GAAA,CAAA,aAAU,CAAC,MAAM;wBAAA;;;;;;8BAGxD,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,iJAAA,CAAA,UAAY;4BAAC,SAAS;4BAAQ,UAAU,CAAC;;;;;;sCAC1C,6LAAC,kJAAA,CAAA,UAAa;4BAAC,SAAS;4BAAS,UAAU,CAAC;;;;;;;;;;;;;;;;;;;;;;;AAKtD;KA5CwB","debugId":null}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Canvas.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useMutation, useSelf, useStorage } from \"@liveblocks/react\";\r\nimport { colorToCss, penPointsToPathLayer, pointerEventToCanvasPoint } from \"~/utils\";\r\nimport LayerComponent from \"./LayerComponent\";\r\nimport { Camera, Layer, LayerType,Point, RectangleLayer, EllipseLayer, CanvasState, CanvasMode } from \"~/types\";\r\nimport {nanoid} from 'nanoid'\r\nimport { LiveObject } from \"@liveblocks/client\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport ToolsBar from \"../toolsbar/ToolsBar\";\r\nimport Path from \"./Path\";\r\n\r\nconst MAX_LAYERS = 100;\r\n\r\nexport default function Canvas() {\r\n\r\n  const roomColor = useStorage((root) => root.roomColor)\r\n  const layerIds = useStorage((root) => root.layerIds)\r\n\r\n  const pencilDraft = useSelf(((me) => me.presence.pencilDraft))\r\n\r\n  const [camera,setCamera] = useState<Camera>({x:0,y:0,zoom:1})\r\n\r\n  const [canvasState, setCanvasState] = useState<CanvasState>({mode: CanvasMode.None})\r\n\r\n  const insertLayer = useMutation(\r\n    (\r\n      {storage,setMyPresence},\r\n      layerType : LayerType.Ellipse | LayerType.Rectangle | LayerType.Text, \r\n      position: Point\r\n    ) => {\r\n      const liveLayers = storage.get(\"layers\");\r\n      if (liveLayers.size >= MAX_LAYERS) {\r\n        return\r\n      }\r\n      const liveLayerIds = storage.get(\"layerIds\")\r\n      const layerId = nanoid();\r\n      let layer: LiveObject<Layer> | null = null;\r\n\r\n      if(layerType === LayerType.Rectangle) {\r\n        layer = new LiveObject<RectangleLayer>({\r\n          type: LayerType.Rectangle,\r\n          x: position.x,\r\n          y: position.y,\r\n          height: 100,\r\n          width: 100,\r\n          fill: {r:217, g:217, b:217},\r\n          stroke: {r:217, g:217, b:217},\r\n          opacity:100,\r\n        })\r\n      }\r\n      else if(layerType === LayerType.Ellipse) {\r\n        layer = new LiveObject<EllipseLayer>({\r\n          type: LayerType.Ellipse,\r\n          x: position.x,\r\n          y: position.y,\r\n          height: 100,\r\n          width: 100,\r\n          fill: {r:217, g:217, b:217},\r\n          stroke: {r:217, g:217, b:217},\r\n          opacity:100,\r\n        })\r\n      }\r\n      if (layer) {\r\n        liveLayerIds.push(layerId);\r\n        liveLayers.set(layerId, layer);\r\n\r\n        setMyPresence({selection: [layerId]}, {addToHistory: true})\r\n      }\r\n    },[]\r\n  )\r\n\r\n  const onWheel = useCallback((e: React.WheelEvent) => {\r\n    setCamera((camera) => ({\r\n      x: camera.x - e.deltaX,\r\n      y: camera.y - e.deltaY,\r\n      zoom: camera.zoom,\r\n    }));\r\n  }, []);\r\n\r\n  const insertPath = useMutation(({storage, self, setMyPresence}) => {\r\n    const liveLayers = storage.get(\"layers\")\r\n    const {pencilDraft} = self.presence\r\n\r\n    if (\r\n      pencilDraft === null || \r\n      pencilDraft.length < 2 || \r\n      liveLayers.size >= MAX_LAYERS\r\n    ) {\r\n      setMyPresence({ pencilDraft: null})\r\n      return;\r\n    }\r\n\r\n    const id = nanoid();\r\n    liveLayers.set(\r\n      id, \r\n      new LiveObject(\r\n        penPointsToPathLayer(pencilDraft, {r: 217, g: 217, b: 217})\r\n      )\r\n    )\r\n\r\n    const liveLayerIds = storage.get(\"layerIds\");\r\n    liveLayerIds.push(id);\r\n    setMyPresence({pencilDraft: null})\r\n    setCanvasState({mode: CanvasMode.Pencil})\r\n  },[])\r\n\r\n  const onPointerUp = useMutation(({}, e:React.PointerEvent) => {\r\n    const point = pointerEventToCanvasPoint(e,camera)\r\n\r\n    if (canvasState.mode === CanvasMode.None) {\r\n      setCanvasState({mode: CanvasMode.None})\r\n    }\r\n    else if (canvasState.mode === CanvasMode.Inserting) {\r\n      insertLayer(\r\n        canvasState.layerType,\r\n        point\r\n      )\r\n    }\r\n    else if (canvasState.mode === CanvasMode.Dragging) {\r\n      setCanvasState({mode: CanvasMode.Dragging,origin: null})\r\n    }\r\n    else if (canvasState.mode === CanvasMode.Pencil) {\r\n      insertPath();\r\n    }\r\n  },[canvasState, setCanvasState, insertLayer])\r\n  \r\n  const startDrawing = useMutation(({setMyPresence}, point: Point, pressure: number) => {\r\n    setMyPresence({\r\n      pencilDraft: [[point.x, point.y, pressure]],\r\n      penColor: { r:217, g:217, b:217}\r\n    })\r\n  },[])\r\n\r\n  const onPointerDown = useMutation(({}, e:React.PointerEvent) => {\r\n    const point = pointerEventToCanvasPoint(e,camera)\r\n\r\n    if (canvasState.mode === CanvasMode.Dragging) {\r\n      setCanvasState({mode: CanvasMode.Dragging, origin: point})\r\n      return;\r\n    }\r\n    if (canvasState.mode === CanvasMode.Pencil) {\r\n      startDrawing(point, e.pressure)\r\n      return;\r\n    }\r\n  },[canvasState.mode, setCanvasState, camera, startDrawing])\r\n\r\n  const continueDrawing = useMutation(({self, setMyPresence}, point: Point, e: React.PointerEvent) => {\r\n    const {pencilDraft} = self.presence\r\n\r\n    if(canvasState.mode !== CanvasMode.Pencil || pencilDraft === null || e.buttons !== 1) {\r\n      return;\r\n    }\r\n\r\n    setMyPresence({\r\n      pencilDraft: [...pencilDraft, [point.x, point.y, e.pressure]],\r\n      penColor: { r:217, g:217, b:217}\r\n    })\r\n  },[canvasState.mode])\r\n\r\n  const onPointerMove = useMutation(({}, e:React.PointerEvent) => {\r\n    const point = pointerEventToCanvasPoint(e,camera)\r\n\r\n    if (canvasState.mode === CanvasMode.Dragging && canvasState.origin !== null) {\r\n      const deltaX = e.movementX\r\n      const deltaY = e.movementY\r\n\r\n      setCamera((camera) => ({\r\n        x: camera.x + deltaX,\r\n        y: camera.y + deltaY,\r\n        zoom: camera.zoom\r\n      }))\r\n    }\r\n    else if (canvasState.mode === CanvasMode.Pencil) {\r\n      continueDrawing(point, e);\r\n    }\r\n  },[canvasState, setCanvasState, insertLayer, continueDrawing])\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full\">\r\n      <main className=\"fixed left-0 right-0 h-screen overflow-y-auto\">\r\n        <div \r\n          style={{backgroundColor: roomColor ? colorToCss(roomColor) : \"#1E1E1E\"}}\r\n          className=\"h-full w-full touch-none\"\r\n        >\r\n          <svg \r\n            onWheel={onWheel} \r\n            onPointerUp={onPointerUp} className=\"w-full h-full\"\r\n            onPointerDown={onPointerDown}\r\n            onPointerMove={onPointerMove}\r\n          >\r\n            <g \r\n              style={{\r\n                transform: `translate(${camera.x}px, ${camera.y}px) scale(${camera.zoom})`\r\n              }}\r\n            >\r\n              {layerIds?.map((layerId) => (<LayerComponent key={layerId} id={layerId}/>))}\r\n            </g>\r\n            {\r\n              pencilDraft !== null && \r\n              pencilDraft.length > 0 &&\r\n              <Path \r\n                x={0} \r\n                y={0}\r\n                opacity={100}\r\n                fill={colorToCss({r: 217, g: 217, b: 217})} \r\n                points={pencilDraft} \r\n              />\r\n            }\r\n          </svg>\r\n        </div>\r\n      </main>\r\n      <ToolsBar\r\n        canvasState={canvasState}\r\n        setCanvasState={(newState) => setCanvasState(newState)}\r\n        zoomIn={() => {\r\n          setCamera((camera) => ({...camera, zoom: camera.zoom + 0.1}))\r\n        }} \r\n        zoomOut={() => {\r\n          setCamera((camera) => ({...camera, zoom: camera.zoom - 0.1}))\r\n        }} \r\n        canZoomIn={camera.zoom < 2} \r\n        canZoomOut={camera.zoom > 0.5}\r\n      />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1385, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/liveblocks/Room.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { LiveList, LiveMap, LiveObject } from \"@liveblocks/client\";\r\nimport { ClientSideSuspense, LiveblocksProvider, RoomProvider } from \"@liveblocks/react\";\r\nimport { ReactNode } from \"react\";\r\nimport { Layer } from \"~/types\";\r\n\r\nexport function Room({children, roomId} : {children: ReactNode, roomId: string}) {\r\n\r\n  return (\r\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\r\n      <RoomProvider \r\n        id={roomId} \r\n        initialPresence={{\r\n          cursor: null,\r\n          selection: [],\r\n          penColor: null,\r\n          pencilDraft: null,\r\n        }}\r\n        initialStorage={{\r\n          roomColor: {r: 30,g: 30,b: 30},\r\n          layers: new LiveMap<string, LiveObject<Layer>>(),\r\n          layerIds: new LiveList([])\r\n        }}\r\n      >\r\n        <ClientSideSuspense\r\n          fallback={\r\n            <div \r\n            className=\"flex items-center justify-center h-screen flex-col gap-2\">\r\n              <img className=\"h-[50px] w-[50px] animate-bounce\" src=\"loading...\" alt=\"/loading-com.svg\" />\r\n              <h1 className=\"text-sm font-normal\">\r\n                Loading\r\n              </h1>\r\n            </div>\r\n          }>\r\n          {children}\r\n        </ClientSideSuspense>\r\n      </RoomProvider>\r\n    </LiveblocksProvider>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAOO,SAAS,KAAK,EAAC,QAAQ,EAAE,MAAM,EAAyC;IAE7E,qBACE,6LAAC,qKAAA,CAAA,qBAAkB;QAAC,cAAa;kBAC/B,cAAA,6LAAC,yNAAA,CAAA,eAAY;YACX,IAAI;YACJ,iBAAiB;gBACf,QAAQ;gBACR,WAAW,EAAE;gBACb,UAAU;gBACV,aAAa;YACf;YACA,gBAAgB;gBACd,WAAW;oBAAC,GAAG;oBAAG,GAAG;oBAAG,GAAG;gBAAE;gBAC7B,QAAQ,IAAI,wJAAA,CAAA,UAAO;gBACnB,UAAU,IAAI,wJAAA,CAAA,WAAQ,CAAC,EAAE;YAC3B;sBAEA,cAAA,6LAAC,qKAAA,CAAA,qBAAkB;gBACjB,wBACE,6LAAC;oBACD,WAAU;;sCACR,6LAAC;4BAAI,WAAU;4BAAmC,KAAI;4BAAa,KAAI;;;;;;sCACvE,6LAAC;4BAAG,WAAU;sCAAsB;;;;;;;;;;;;0BAKvC;;;;;;;;;;;;;;;;AAKX;KAjCgB","debugId":null}}]
}