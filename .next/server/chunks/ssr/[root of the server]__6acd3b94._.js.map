{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/utils.ts"],"sourcesContent":["import { Camera, Color, Point } from \"./types\";\r\n\r\nexport function colorToCss(color: Color) {\r\n  return (\r\n    ` #${color.r.toString(16).padStart(2,\"0\")}\r\n      #${color.g.toString(16).padStart(2,\"0\")}\r\n      #${color.b.toString(16).padStart(2,\"0\")}\r\n    `\r\n  );\r\n}\r\n\r\nexport const pointerEventToCanvasPoint = (\r\n  e: React.PointerEvent, \r\n  camera: Camera\r\n): Point => {\r\n  return {\r\n    x: Math.round(e.clientX) - camera.x,\r\n    y: Math.round(e.clientY) - camera.y\r\n  }\r\n};"],"names":[],"mappings":";;;;AAEO,SAAS,WAAW,KAAY;IACrC,OACE,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAE,KAAK;OACvC,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAE,KAAK;OACvC,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAE,KAAK;IAC1C,CAAC;AAEL;AAEO,MAAM,4BAA4B,CACvC,GACA;IAEA,OAAO;QACL,GAAG,KAAK,KAAK,CAAC,EAAE,OAAO,IAAI,OAAO,CAAC;QACnC,GAAG,KAAK,KAAK,CAAC,EAAE,OAAO,IAAI,OAAO,CAAC;IACrC;AACF","debugId":null}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/types.ts"],"sourcesContent":["export type Color = {\r\n  r: number,\r\n  g: number,\r\n  b: number,\r\n}\r\n\r\nexport type Camera = {\r\n  x: number,\r\n  y: number,\r\n  zoom: number,\r\n}\r\n\r\nexport enum LayerType {\r\n  Rectangle,\r\n  Ellipse,\r\n  Path,\r\n  Text,\r\n}\r\n\r\nexport type RectangleLayer = {\r\n  type: LayerType.Rectangle,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n  cornerRadius?: number,\r\n}\r\n\r\nexport type EllipseLayer = {\r\n  type: LayerType.Ellipse,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n}\r\n\r\nexport type PathLayer = {\r\n  type: LayerType.Path,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n  points: number[][],\r\n}\r\n\r\nexport type TextLayer = {\r\n  type: LayerType.Text,\r\n  x: number,\r\n  y: number,\r\n  height: number,\r\n  width: number,\r\n  text: string,\r\n  fontSize: number,\r\n  fontWeight: number,\r\n  fontFamily: string,\r\n  fill: Color,\r\n  stroke: Color,\r\n  opacity: number,\r\n}\r\n\r\nexport type Layer = RectangleLayer | EllipseLayer | PathLayer | TextLayer;\r\n\r\nexport type Point = {\r\n  x: number,\r\n  y: number,\r\n}\r\n\r\nexport type CanvasState = {\r\n  mode: CanvasMode.None\r\n} | {\r\n  mode: CanvasMode.Dragging\r\n  origin: Point | null\r\n} | {\r\n  mode: CanvasMode.Inserting\r\n  layerType: LayerType.Rectangle | LayerType.Ellipse | LayerType.Text\r\n}\r\n\r\nexport enum CanvasMode {\r\n  None,\r\n  Dragging,\r\n  Inserting\r\n}"],"names":[],"mappings":";;;;AAYO,IAAA,AAAK,mCAAA;;;;;WAAA;;AA0EL,IAAA,AAAK,oCAAA;;;;WAAA","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Rectangle.tsx"],"sourcesContent":["import { RectangleLayer } from \"~/types\";\r\nimport { colorToCss } from \"~/utils\";\r\n\r\nexport default function Rectangle({\r\n  id,\r\n  layer,\r\n} : {id : string , layer : RectangleLayer}) {\r\n  const {x,y,width,height,fill,stroke,opacity,cornerRadius} = layer\r\n  return (\r\n    <g>\r\n      <rect \r\n        style={{transform: `translate(${x}px, ${y}px)`}}  \r\n        width={width} \r\n        height={height} \r\n        fill={fill ? colorToCss(fill) : \"#CCC\"}\r\n        strokeWidth={1}\r\n        stroke={stroke ? colorToCss(stroke) : \"#CCC\"}\r\n        opacity={`${opacity ?? 100}%`}\r\n        rx={cornerRadius ?? 0}\r\n        ry={cornerRadius ?? 0}\r\n      />\r\n    </g>\r\n  )\r\n}"],"names":[],"mappings":";;;;AACA;;;AAEe,SAAS,UAAU,EAChC,EAAE,EACF,KAAK,EACmC;IACxC,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,KAAK,EAAC,MAAM,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAC,YAAY,EAAC,GAAG;IAC5D,qBACE,8OAAC;kBACC,cAAA,8OAAC;YACC,OAAO;gBAAC,WAAW,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;YAAA;YAC9C,OAAO;YACP,QAAQ;YACR,MAAM,OAAO,CAAA,GAAA,4GAAA,CAAA,aAAU,AAAD,EAAE,QAAQ;YAChC,aAAa;YACb,QAAQ,SAAS,CAAA,GAAA,4GAAA,CAAA,aAAU,AAAD,EAAE,UAAU;YACtC,SAAS,GAAG,WAAW,IAAI,CAAC,CAAC;YAC7B,IAAI,gBAAgB;YACpB,IAAI,gBAAgB;;;;;;;;;;;AAI5B","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Ellipse.tsx"],"sourcesContent":["import { EllipseLayer } from \"~/types\";\r\nimport { colorToCss } from \"~/utils\";\r\n\r\nexport default function Ellipse({\r\n  id,\r\n  layer,\r\n} : {id : string , layer : EllipseLayer}) {\r\n  const {x,y,width,height,fill,stroke,opacity} = layer\r\n  return (\r\n    <g>\r\n      <ellipse \r\n        style={{transform: `translate(${x}px, ${y}px)`}}\r\n        fill={fill ? colorToCss(fill) : \"#CCC\"} \r\n        stroke={stroke ? colorToCss(stroke) : \"#CCC\"}\r\n        cx={width/2}\r\n        cy={height/2}\r\n        rx={width/2}\r\n        ry={height/2}\r\n        strokeWidth=\"1\"\r\n        opacity={`${opacity ?? 100}%`}\r\n      />\r\n    </g>\r\n  )\r\n}"],"names":[],"mappings":";;;;AACA;;;AAEe,SAAS,QAAQ,EAC9B,EAAE,EACF,KAAK,EACiC;IACtC,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,KAAK,EAAC,MAAM,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAC,GAAG;IAC/C,qBACE,8OAAC;kBACC,cAAA,8OAAC;YACC,OAAO;gBAAC,WAAW,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;YAAA;YAC9C,MAAM,OAAO,CAAA,GAAA,4GAAA,CAAA,aAAU,AAAD,EAAE,QAAQ;YAChC,QAAQ,SAAS,CAAA,GAAA,4GAAA,CAAA,aAAU,AAAD,EAAE,UAAU;YACtC,IAAI,QAAM;YACV,IAAI,SAAO;YACX,IAAI,QAAM;YACV,IAAI,SAAO;YACX,aAAY;YACZ,SAAS,GAAG,WAAW,IAAI,CAAC,CAAC;;;;;;;;;;;AAIrC","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/LayerComponent.tsx"],"sourcesContent":["import { useStorage } from \"@liveblocks/react\";\r\nimport { memo } from \"react\";\r\nimport { LayerType } from \"~/types\";\r\nimport Rectangle from \"./Rectangle\";\r\nimport Ellipse from './Ellipse';\r\n\r\nconst LayerComponent = memo(({id}: {id: string}) => {\r\n  const layer = useStorage((root) => root.layers.get(id))\r\n  if(!layer) {\r\n    return null;\r\n  }\r\n  switch(layer.type) {\r\n    case LayerType.Rectangle :\r\n      return <Rectangle id={id} layer={layer}/>;\r\n    case LayerType.Ellipse :\r\n      return <Ellipse id={id} layer={layer} />;\r\n    default :\r\n      return null;\r\n  }\r\n})\r\n\r\nLayerComponent.displayName = \"LayerComponent\"\r\n\r\nexport default LayerComponent;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,OAAI,AAAD,EAAE,CAAC,EAAC,EAAE,EAAe;IAC7C,MAAM,QAAQ,CAAA,GAAA,kNAAA,CAAA,aAAU,AAAD,EAAE,CAAC,OAAS,KAAK,MAAM,CAAC,GAAG,CAAC;IACnD,IAAG,CAAC,OAAO;QACT,OAAO;IACT;IACA,OAAO,MAAM,IAAI;QACf,KAAK,4GAAA,CAAA,YAAS,CAAC,SAAS;YACtB,qBAAO,8OAAC,yIAAA,CAAA,UAAS;gBAAC,IAAI;gBAAI,OAAO;;;;;;QACnC,KAAK,4GAAA,CAAA,YAAS,CAAC,OAAO;YACpB,qBAAO,8OAAC,uIAAA,CAAA,UAAO;gBAAC,IAAI;gBAAI,OAAO;;;;;;QACjC;YACE,OAAO;IACX;AACF;AAEA,eAAe,WAAW,GAAG;uCAEd","debugId":null}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/IconButton.tsx"],"sourcesContent":["export default function IconButton({\r\n  onClick,\r\n  children,\r\n  isActive,\r\n  disabled\r\n}: {\r\n  onClick: () => void,\r\n  children: React.ReactNode,\r\n  isActive?: boolean,\r\n  disabled?: boolean\r\n}) {\r\n  return (\r\n    <button \r\n    className={`flex items-center justify-center min-h-[28px] min-w-[28px] rounded-md text-gray-500 hover:enabled:text-gray-700 focus:enabled:text-gray-700 active:enabled:text-gray-900 disabled:cursor-default disabled:opacity-50 ${isActive ? \"bg-gray-100 text-blue-600 hover:enabled:text-blue-600 focus:enabled:text-blue-600 active:enabled:text-blue-600\" : \"\"}`}\r\n    onClick={onClick} \r\n    disabled={disabled}\r\n    >\r\n      {children}\r\n    </button>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAAe,SAAS,WAAW,EACjC,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,QAAQ,EAMT;IACC,qBACE,8OAAC;QACD,WAAW,CAAC,qNAAqN,EAAE,WAAW,mHAAmH,IAAI;QACrW,SAAS;QACT,UAAU;kBAEP;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/SelectionButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { CanvasMode } from \"~/types\";\r\nimport IconButton from \"./IconButton\";\r\nimport { BiPointer } from 'react-icons/bi'\r\nimport { RiHand } from 'react-icons/ri'\r\nimport menu from './menu.svg'\r\nimport MenuIcon from \"./MenuIcon\";\r\n\r\nexport default function SelectionButton({\r\n  isActive,\r\n  canvasMode,\r\n  onClick\r\n}: { \r\n  isActive: boolean,\r\n  canvasMode: CanvasMode, \r\n  onClick: (canvasMode: CanvasMode.None | CanvasMode.Dragging) => void\r\n}) {\r\n  const [open, setOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  const handleClick = (canvasMode: CanvasMode.None | CanvasMode.Dragging) => {\r\n    onClick(canvasMode)\r\n    setOpen(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setOpen(false)\r\n      }\r\n    }\r\n      document.addEventListener('mousedown',handleClickOutside)\r\n      \r\n      return() => document.removeEventListener('mousedown',handleClickOutside)\r\n  },[])\r\n\r\n  return (\r\n    <div className=\"relative flex\" ref={menuRef}>\r\n      <IconButton isActive={isActive} onClick={() => onClick(CanvasMode.None)}>\r\n        {canvasMode !== CanvasMode.None  && canvasMode !== CanvasMode.Dragging && (<BiPointer className=\"h-5 w-5\"/>)}\r\n        {canvasMode === CanvasMode.None  && <BiPointer className=\"h-5 w-5\"/>}\r\n        {canvasMode === CanvasMode.Dragging  && <RiHand className=\"h-5 w-5\"/>}\r\n      </IconButton>\r\n      <button \r\n        onClick={() => setOpen(!open)}\r\n        className=\"ml-1\"\r\n      >\r\n        v\r\n      </button>\r\n      {open && (\r\n        <div className=\"absolute -top-20 mt-1 min-w-[150px] rounded-xl bg-[#1e1e1e] p-2 shadow-lg\">\r\n          <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasMode === CanvasMode.None ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(CanvasMode.None)}>\r\n            <span className=\"w-5 text-xs\">\r\n              {canvasMode === CanvasMode.None && \"✓\"}\r\n            </span>\r\n            <BiPointer className=\"mr-2 h-4 w-4\"/>\r\n            <span className=\"text-xs\">Move</span>\r\n          </button>\r\n\r\n          <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasMode === CanvasMode.Dragging ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(CanvasMode.Dragging)}>\r\n            <span className=\"w-5 text-xs\">\r\n              {canvasMode === CanvasMode.Dragging && \"✓\"}\r\n            </span>\r\n            <RiHand className=\"mr-2 h-4 w-4\"/>\r\n            <span className=\"text-xs\">Hand Tool</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAUe,SAAS,gBAAgB,EACtC,QAAQ,EACR,UAAU,EACV,OAAO,EAKR;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAEvC,MAAM,cAAc,CAAC;QACnB,QAAQ;QACR,QAAQ;IACV;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBACtE,QAAQ;YACV;QACF;QACE,SAAS,gBAAgB,CAAC,aAAY;QAEtC,OAAM,IAAM,SAAS,mBAAmB,CAAC,aAAY;IACzD,GAAE,EAAE;IAEJ,qBACE,8OAAC;QAAI,WAAU;QAAgB,KAAK;;0BAClC,8OAAC,4IAAA,CAAA,UAAU;gBAAC,UAAU;gBAAU,SAAS,IAAM,QAAQ,4GAAA,CAAA,aAAU,CAAC,IAAI;;oBACnE,eAAe,4GAAA,CAAA,aAAU,CAAC,IAAI,IAAK,eAAe,4GAAA,CAAA,aAAU,CAAC,QAAQ,kBAAK,8OAAC,8IAAA,CAAA,YAAS;wBAAC,WAAU;;;;;;oBAC/F,eAAe,4GAAA,CAAA,aAAU,CAAC,IAAI,kBAAK,8OAAC,8IAAA,CAAA,YAAS;wBAAC,WAAU;;;;;;oBACxD,eAAe,4GAAA,CAAA,aAAU,CAAC,QAAQ,kBAAK,8OAAC,8IAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;;;;;;;0BAE5D,8OAAC;gBACC,SAAS,IAAM,QAAQ,CAAC;gBACxB,WAAU;0BACX;;;;;;YAGA,sBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,eAAe,4GAAA,CAAA,aAAU,CAAC,IAAI,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,4GAAA,CAAA,aAAU,CAAC,IAAI;;0CAC1L,8OAAC;gCAAK,WAAU;0CACb,eAAe,4GAAA,CAAA,aAAU,CAAC,IAAI,IAAI;;;;;;0CAErC,8OAAC,8IAAA,CAAA,YAAS;gCAAC,WAAU;;;;;;0CACrB,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;kCAG5B,8OAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,eAAe,4GAAA,CAAA,aAAU,CAAC,QAAQ,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,4GAAA,CAAA,aAAU,CAAC,QAAQ;;0CAClM,8OAAC;gCAAK,WAAU;0CACb,eAAe,4GAAA,CAAA,aAAU,CAAC,QAAQ,IAAI;;;;;;0CAEzC,8OAAC,8IAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC","debugId":null}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/menu.svg.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurDataURL: null, blurWidth: 0, blurHeight: 0 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,8HAAA,CAAA,UAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,aAAa;IAAM,WAAW;IAAG,YAAY;AAAE","debugId":null}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/ShapesSelectionButton.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { CanvasMode, CanvasState, LayerType } from \"~/types\";\r\nimport IconButton from \"./IconButton\";\r\nimport { BiPointer } from \"react-icons/bi\";\r\nimport { RiHand } from \"react-icons/ri\";\r\nimport {IoEllipseOutline, IoSquareOutline} from \"react-icons/io5\"\r\nimport menu from './menu.svg'\r\n\r\nexport default function ShapesSelectionButton({\r\n  isActive,\r\n  canvasState,\r\n  onClick\r\n}: { \r\n  isActive: boolean,\r\n  canvasState: CanvasState, \r\n  onClick: (layerType: LayerType.Rectangle | LayerType.Ellipse) => void\r\n}) {\r\n  const [open, setOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  const handleClick = (layerType: LayerType.Rectangle | LayerType.Ellipse) => {\r\n    onClick(layerType)\r\n    setOpen(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setOpen(false)\r\n      }\r\n    }\r\n      document.addEventListener('mousedown',handleClickOutside)\r\n      \r\n      return() => document.removeEventListener('mousedown',handleClickOutside)\r\n  },[])\r\n\r\n  return (\r\n    <div className=\"relative flex\" ref={menuRef}>\r\n    <IconButton \r\n      isActive={isActive} \r\n      onClick={() => onClick(LayerType.Rectangle)}\r\n    >\r\n      {canvasState.mode !== CanvasMode.Inserting && <IoSquareOutline className=\"w-5 h-5\"/>}\r\n      {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Rectangle && <IoSquareOutline className=\"w-5 h-5\"/>}\r\n      {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Ellipse && <IoEllipseOutline className=\"w-5 h-5\"/>}\r\n    </IconButton>\r\n    <button \r\n      onClick={() => setOpen(!open)}\r\n      className=\"ml-1\"\r\n    >\r\n      {menu}\r\n    </button>\r\n    {open && (\r\n      <div className=\"absolute -top-20 mt-1 min-w-[150px] rounded-xl bg-[#1e1e1e] p-2 shadow-lg\">\r\n        <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Rectangle ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(LayerType.Rectangle)}>\r\n          <span className=\"w-5 text-xs\">\r\n            {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Rectangle && \"✓\"}\r\n          </span>\r\n          <IoSquareOutline className=\"mr-2 h-4 w-4\"/>\r\n          <span className=\"text-xs\">Rectangle</span>\r\n        </button>\r\n\r\n        <button className={`flex w-full items-center rounded-md p-1 text-white hover:bg-blue-500 ${canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Ellipse ? \"bg-blue-500\" : \"\"}`} onClick={() => handleClick(LayerType.Ellipse)}>\r\n          <span className=\"w-5 text-xs\">\r\n            {canvasState.mode === CanvasMode.Inserting && canvasState.layerType === LayerType.Ellipse && \"✓\"}\r\n          </span>\r\n          <IoEllipseOutline className=\"mr-2 h-4 w-4\"/>\r\n          <span className=\"text-xs\">Ellipse</span>\r\n        </button>\r\n      </div>\r\n    )}\r\n  </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAGA;AACA;;;;;;;AAEe,SAAS,sBAAsB,EAC5C,QAAQ,EACR,WAAW,EACX,OAAO,EAKR;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAEvC,MAAM,cAAc,CAAC;QACnB,QAAQ;QACR,QAAQ;IACV;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBACtE,QAAQ;YACV;QACF;QACE,SAAS,gBAAgB,CAAC,aAAY;QAEtC,OAAM,IAAM,SAAS,mBAAmB,CAAC,aAAY;IACzD,GAAE,EAAE;IAEJ,qBACE,8OAAC;QAAI,WAAU;QAAgB,KAAK;;0BACpC,8OAAC,4IAAA,CAAA,UAAU;gBACT,UAAU;gBACV,SAAS,IAAM,QAAQ,4GAAA,CAAA,YAAS,CAAC,SAAS;;oBAEzC,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,kBAAI,8OAAC,+IAAA,CAAA,kBAAe;wBAAC,WAAU;;;;;;oBACxE,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,4GAAA,CAAA,YAAS,CAAC,SAAS,kBAAI,8OAAC,+IAAA,CAAA,kBAAe;wBAAC,WAAU;;;;;;oBACzH,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,4GAAA,CAAA,YAAS,CAAC,OAAO,kBAAI,8OAAC,+IAAA,CAAA,mBAAgB;wBAAC,WAAU;;;;;;;;;;;;0BAE3H,8OAAC;gBACC,SAAS,IAAM,QAAQ,CAAC;gBACxB,WAAU;0BAET,0SAAA,CAAA,UAAI;;;;;;YAEN,sBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,4GAAA,CAAA,YAAS,CAAC,SAAS,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,4GAAA,CAAA,YAAS,CAAC,SAAS;;0CAC1P,8OAAC;gCAAK,WAAU;0CACb,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,4GAAA,CAAA,YAAS,CAAC,SAAS,IAAI;;;;;;0CAEjG,8OAAC,+IAAA,CAAA,kBAAe;gCAAC,WAAU;;;;;;0CAC3B,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;kCAG5B,8OAAC;wBAAO,WAAW,CAAC,qEAAqE,EAAE,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,4GAAA,CAAA,YAAS,CAAC,OAAO,GAAG,gBAAgB,IAAI;wBAAE,SAAS,IAAM,YAAY,4GAAA,CAAA,YAAS,CAAC,OAAO;;0CACtP,8OAAC;gCAAK,WAAU;0CACb,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI,YAAY,SAAS,KAAK,4GAAA,CAAA,YAAS,CAAC,OAAO,IAAI;;;;;;0CAE/F,8OAAC,+IAAA,CAAA,mBAAgB;gCAAC,WAAU;;;;;;0CAC5B,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMpC","debugId":null}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/toolsbar/ToolsBar.tsx"],"sourcesContent":["import { CanvasMode, CanvasState, LayerType } from \"~/types\";\r\nimport SelectionButton from \"./SelectionButton\";\r\nimport ShapesSelectionButton from \"./ShapesSelectionButton\";\r\n\r\nexport default function ToolsBar({\r\n  canvasState,\r\n  setCanvasState,\r\n} : {\r\n  canvasState: CanvasState,\r\n  setCanvasState: (newState: CanvasState) => void\r\n}) {\r\n  return (\r\n    <div className=\"fixed bottom-4 left-1/2 z-10 flex -translate-x-1/2 items-center justify-center rounded-lg bg-white p-1 shadow-[0_0_3px_rgba(0,0,0,0,18)]\">\r\n      <div className=\"flex justify-center items-center gap-3\">\r\n        <SelectionButton \r\n          isActive={canvasState.mode === CanvasMode.None || canvasState.mode === CanvasMode.Dragging}\r\n          canvasMode={canvasState.mode} \r\n          onClick={(canvasMode) => setCanvasState(canvasMode === CanvasMode.Dragging ?\r\n            {mode: canvasMode, origin: null} : {mode: canvasMode}\r\n          )}\r\n        />\r\n        <ShapesSelectionButton \r\n          isActive={canvasState.mode === CanvasMode.Inserting && [LayerType.Rectangle, LayerType.Ellipse].includes(canvasState.layerType)}\r\n          canvasState={canvasState}\r\n          onClick={(layerType) => setCanvasState({mode: CanvasMode.Inserting, layerType})}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,SAAS,EAC/B,WAAW,EACX,cAAc,EAIf;IACC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,iJAAA,CAAA,UAAe;oBACd,UAAU,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,IAAI,IAAI,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,QAAQ;oBAC1F,YAAY,YAAY,IAAI;oBAC5B,SAAS,CAAC,aAAe,eAAe,eAAe,4GAAA,CAAA,aAAU,CAAC,QAAQ,GACxE;4BAAC,MAAM;4BAAY,QAAQ;wBAAI,IAAI;4BAAC,MAAM;wBAAU;;;;;;8BAGxD,8OAAC,uJAAA,CAAA,UAAqB;oBACpB,UAAU,YAAY,IAAI,KAAK,4GAAA,CAAA,aAAU,CAAC,SAAS,IAAI;wBAAC,4GAAA,CAAA,YAAS,CAAC,SAAS;wBAAE,4GAAA,CAAA,YAAS,CAAC,OAAO;qBAAC,CAAC,QAAQ,CAAC,YAAY,SAAS;oBAC9H,aAAa;oBACb,SAAS,CAAC,YAAc,eAAe;4BAAC,MAAM,4GAAA,CAAA,aAAU,CAAC,SAAS;4BAAE;wBAAS;;;;;;;;;;;;;;;;;AAKvF","debugId":null}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/canvas/Canvas.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useMutation, useStorage } from \"@liveblocks/react\";\r\nimport { colorToCss, pointerEventToCanvasPoint } from \"~/utils\";\r\nimport LayerComponent from \"./LayerComponent\";\r\nimport { Camera, Layer, LayerType,Point, RectangleLayer, EllipseLayer, CanvasState, CanvasMode } from \"~/types\";\r\nimport {nanoid} from 'nanoid'\r\nimport { LiveObject } from \"@liveblocks/client\";\r\nimport React, { useState } from \"react\";\r\nimport ToolsBar from \"../toolsbar/ToolsBar\";\r\n\r\nconst MAX_LAYERS = 100;\r\n\r\nexport default function Canvas() {\r\n\r\n  const roomColor = useStorage((root) => root.roomColor)\r\n  const layerIds = useStorage((root) => root.layerIds)\r\n\r\n  const [camera,setCamera] = useState<Camera>({x:0,y:0,zoom:1})\r\n  const [canvasState, setCanvasState] = useState<CanvasState>({mode: CanvasMode.None})\r\n\r\n  const insertLayer = useMutation(\r\n    (\r\n      {storage,setMyPresence},\r\n      layerType : LayerType.Ellipse | LayerType.Rectangle | LayerType.Text, \r\n      position: Point\r\n    ) => {\r\n      const liveLayers = storage.get(\"layers\");\r\n      if (liveLayers.size >= MAX_LAYERS) {\r\n        return\r\n      }\r\n      const liveLayerIds = storage.get(\"layerIds\")\r\n      const layerId = nanoid();\r\n      let layer: LiveObject<Layer> | null = null;\r\n\r\n      if(layerType === LayerType.Rectangle) {\r\n        layer = new LiveObject<RectangleLayer>({\r\n          type: LayerType.Rectangle,\r\n          x: position.x,\r\n          y: position.y,\r\n          height: 100,\r\n          width: 100,\r\n          fill: {r:217, g:217, b:217},\r\n          stroke: {r:217, g:217, b:217},\r\n          opacity:100,\r\n        })\r\n      }\r\n      else if(layerType === LayerType.Ellipse) {\r\n        layer = new LiveObject<EllipseLayer>({\r\n          type: LayerType.Ellipse,\r\n          x: position.x,\r\n          y: position.y,\r\n          height: 100,\r\n          width: 100,\r\n          fill: {r:217, g:217, b:217},\r\n          stroke: {r:217, g:217, b:217},\r\n          opacity:100,\r\n        })\r\n      }\r\n      if (layer)  {\r\n        liveLayerIds.push(layerId);\r\n        liveLayers.set(layerId, layer);\r\n\r\n        setMyPresence({selection: [layerId]}, {addToHistory: true})\r\n      }\r\n    },[]\r\n  )\r\n\r\n  const onPointerUp = useMutation(({}, e:React.PointerEvent) => {\r\n    const point = pointerEventToCanvasPoint(e,camera)\r\n\r\n    if (canvasState.mode === CanvasMode.None) {\r\n      setCanvasState({mode: CanvasMode.None})\r\n    }\r\n    else if (canvasState.mode === CanvasMode.Inserting) {\r\n      insertLayer(\r\n        canvasState.layerType,\r\n        point\r\n      )\r\n    }\r\n  },[canvasState, setCanvasState, insertLayer])\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full\">\r\n      <main className=\"fixed left-0 right-0 h-screen overflow-y-auto\">\r\n        <div \r\n          style={{backgroundColor: roomColor ? colorToCss(roomColor) : \"#1E1E1E\"}}\r\n          className=\"h-full w-full touch-none\"\r\n        >\r\n          <svg onPointerUp={onPointerUp} className=\"w-full h-full\">\r\n            <g>\r\n              {layerIds?.map((layerId) => (<LayerComponent key={layerId} id={layerId}/>))}\r\n            </g>\r\n          </svg>\r\n        </div>\r\n      </main>\r\n      <ToolsBar canvasState={canvasState} setCanvasState={(newState) => setCanvasState(newState)} />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 797, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/alloy/Desktop/React%20Projects/grad/src/components/liveblocks/Room.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { LiveList, LiveMap, LiveObject } from \"@liveblocks/client\";\r\nimport { ClientSideSuspense, LiveblocksProvider, RoomProvider } from \"@liveblocks/react\";\r\nimport { ReactNode } from \"react\";\r\nimport { Layer } from \"~/types\";\r\n\r\nexport function Room({children, roomId} : {children: ReactNode, roomId: string}) {\r\n\r\n  return (\r\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\r\n      <RoomProvider \r\n        id={roomId} \r\n        initialPresence={{\r\n          cursor: null,\r\n          selection: [],\r\n          penColor: null,\r\n          pencilDraft: null,\r\n        }}\r\n        initialStorage={{\r\n          roomColor: {r: 30,g: 30,b: 30},\r\n          layers: new LiveMap<string, LiveObject<Layer>>(),\r\n          layerIds: new LiveList([])\r\n        }}\r\n      >\r\n        <ClientSideSuspense\r\n          fallback={\r\n            <div \r\n            className=\"flex items-center justify-center h-screen flex-col gap-2\">\r\n              <img className=\"h-[50px] w-[50px] animate-bounce\" src=\"loading...\" alt=\"/loading-com.svg\" />\r\n              <h1 className=\"text-sm font-normal\">\r\n                Loading\r\n              </h1>\r\n            </div>\r\n          }>\r\n          {children}\r\n        </ClientSideSuspense>\r\n      </RoomProvider>\r\n    </LiveblocksProvider>\r\n  )\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAOO,SAAS,KAAK,EAAC,QAAQ,EAAE,MAAM,EAAyC;IAE7E,qBACE,8OAAC,kKAAA,CAAA,qBAAkB;QAAC,cAAa;kBAC/B,cAAA,8OAAC,sNAAA,CAAA,eAAY;YACX,IAAI;YACJ,iBAAiB;gBACf,QAAQ;gBACR,WAAW,EAAE;gBACb,UAAU;gBACV,aAAa;YACf;YACA,gBAAgB;gBACd,WAAW;oBAAC,GAAG;oBAAG,GAAG;oBAAG,GAAG;gBAAE;gBAC7B,QAAQ,IAAI,qJAAA,CAAA,UAAO;gBACnB,UAAU,IAAI,qJAAA,CAAA,WAAQ,CAAC,EAAE;YAC3B;sBAEA,cAAA,8OAAC,kKAAA,CAAA,qBAAkB;gBACjB,wBACE,8OAAC;oBACD,WAAU;;sCACR,8OAAC;4BAAI,WAAU;4BAAmC,KAAI;4BAAa,KAAI;;;;;;sCACvE,8OAAC;4BAAG,WAAU;sCAAsB;;;;;;;;;;;;0BAKvC;;;;;;;;;;;;;;;;AAKX","debugId":null}}]
}